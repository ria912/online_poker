# ãƒãƒƒãƒˆè¨ˆç®—ãƒ‰ãƒ¡ã‚¤ãƒ³ç§»è¡Œã‚¬ã‚¤ãƒ‰

## ğŸ“‹ ç§»è¡Œã®æ¦‚è¦

ãƒãƒƒãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ `DealerService` ã‹ã‚‰ `domain/pot_calculator.py` ã«ç§»è¡Œã—ã¾ã—ãŸã€‚

### ç›®çš„
- **è²¬å‹™ã®åˆ†é›¢**: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰ã¨é€²è¡Œåˆ¶å¾¡ï¼ˆã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼‰ã‚’æ˜ç¢ºã«åˆ†é›¢
- **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: `GameState` ã«ä¾å­˜ã—ãªã„ç´”ç²‹ãªè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¨ã—ã¦ç‹¬ç«‹
- **å†åˆ©ç”¨æ€§**: ãƒãƒƒãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã‚‚åˆ©ç”¨å¯èƒ½ã«

---

## ğŸ¯ å¤‰æ›´å†…å®¹

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«

#### `domain/pot_calculator.py`
```python
PotCalculator        # ãƒãƒƒãƒˆè¨ˆç®—ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
  â”œâ”€ create_pots_from_bets()      # ãƒ™ãƒƒãƒˆé¡ã‹ã‚‰ãƒãƒƒãƒˆæ§‹é€ ã‚’ç”Ÿæˆ
  â”œâ”€ calculate_distribution()      # ãƒãƒƒãƒˆåˆ†é…ã‚’è¨ˆç®—
  â””â”€ validate_pot_structure()      # ãƒãƒƒãƒˆæ§‹é€ ã®æ•´åˆæ€§æ¤œè¨¼

PotDistributor       # ãƒãƒƒãƒˆåˆ†é…ã®å®Ÿè¡Œ
  â””â”€ apply_distribution()          # è¨ˆç®—æ¸ˆã¿åˆ†é…ã‚’ã‚¹ã‚¿ãƒƒã‚¯ã«åæ˜ 
```

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

#### `services/dealer_service.py`
| ãƒ¡ã‚½ãƒƒãƒ‰ | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `collect_bets_to_pots()` | **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: `PotCalculator.create_pots_from_bets()` ã‚’ä½¿ç”¨ |
| `distribute_pots()` | **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: `PotCalculator` ã¨ `PotDistributor` ã‚’ä½¿ç”¨ |
| `_create_side_pots()` | **éæ¨å¥¨åŒ–**: å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹å­˜ã€å†…éƒ¨ã§ `PotCalculator` ã‚’å‘¼ã³å‡ºã— |
| `calculate_pot_distribution()` | **éæ¨å¥¨åŒ–**: å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹å­˜ã€å†…éƒ¨ã§ `PotCalculator` ã‚’å‘¼ã³å‡ºã— |

---

## ğŸ”„ ç§»è¡Œå‰å¾Œã®æ¯”è¼ƒ

### Before: Serviceså±¤ã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒæ··åœ¨

```python
# dealer_service.py (ç§»è¡Œå‰)
class DealerService:
    def collect_bets_to_pots(self, game):
        # ...100è¡Œä»¥ä¸Šã®ãƒãƒƒãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯...
        if not all_in_seats:
            # ãƒ¡ã‚¤ãƒ³ãƒãƒƒãƒˆå‡¦ç†
        else:
            # ã‚µã‚¤ãƒ‰ãƒãƒƒãƒˆè¨ˆç®—
            sorted_bets = sorted(...)
            for seat_index, bet_amount in sorted_bets:
                # è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
```

**å•é¡Œç‚¹**:
- âŒ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒã‚µãƒ¼ãƒ“ã‚¹å±¤ã«æ¼å‡º
- âŒ `GameState` ã«å¼·ãä¾å­˜ã—ã€å˜ä½“ãƒ†ã‚¹ãƒˆãŒå›°é›£
- âŒ ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰å†åˆ©ç”¨ã§ããªã„

### After: ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã«ç´”ç²‹ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ã—ã¦åˆ†é›¢

```python
# pot_calculator.py (ç§»è¡Œå¾Œ)
class PotCalculator:
    @staticmethod
    def create_pots_from_bets(
        bet_contributions: Dict[int, int],
        all_in_seats: List[int],
        existing_pots: List[Pot]
    ) -> List[Pot]:
        """ç´”ç²‹ãªè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯"""
        # GameStateã«ä¾å­˜ã—ãªã„
```

```python
# dealer_service.py (ç§»è¡Œå¾Œ)
class DealerService:
    def collect_bets_to_pots(self, game):
        # ãƒ‡ãƒ¼ã‚¿åé›†ã®ã¿
        bet_contributions = {...}
        all_in_seats = [...]
        
        # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã«å§”è­²
        game.table.pots = PotCalculator.create_pots_from_bets(
            bet_contributions, all_in_seats, game.table.pots
        )
```

**æ”¹å–„ç‚¹**:
- âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã«é›†ç´„
- âœ… ç´”ç²‹ãªè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã§å˜ä½“ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“
- âœ… ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã‚‚å†åˆ©ç”¨å¯èƒ½

---

## ğŸ“Š ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

### Before
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DealerService              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ãƒãƒƒãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯        â”‚   â”‚ â† ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒæ··åœ¨
â”‚  â”‚ (100è¡Œè¶…)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Domain (Table, Pot)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DealerService              â”‚
â”‚  - ãƒ‡ãƒ¼ã‚¿åé›†                    â”‚
â”‚  - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯å‘¼ã³å‡ºã—      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (å§”è­²)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PotCalculator              â”‚ â† ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚’é›†ç´„
â”‚  - create_pots_from_bets()      â”‚
â”‚  - calculate_distribution()     â”‚
â”‚  - validate_pot_structure()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Domain (Table, Pot)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. ãƒãƒƒãƒˆä½œæˆï¼ˆãƒ™ãƒƒãƒˆå›åæ™‚ï¼‰

```python
# DealerService.collect_bets_to_pots() å†…ã§ä½¿ç”¨
from ..domain.pot_calculator import PotCalculator

bet_contributions = {0: 100, 1: 200, 2: 200}  # {seat_index: bet_amount}
all_in_seats = [0]  # ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ã—ãŸåº§å¸­

# ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã§ãƒãƒƒãƒˆæ§‹é€ ã‚’è¨ˆç®—
game.table.pots = PotCalculator.create_pots_from_bets(
    bet_contributions=bet_contributions,
    all_in_seats=all_in_seats,
    existing_pots=game.table.pots
)
```

### 2. ãƒãƒƒãƒˆåˆ†é…ï¼ˆã‚·ãƒ§ãƒ¼ãƒ€ã‚¦ãƒ³æ™‚ï¼‰

```python
# DealerService.distribute_pots() å†…ã§ä½¿ç”¨
from ..domain.pot_calculator import PotCalculator, PotDistributor

# ãƒãƒ³ãƒ‰ã‚¹ã‚³ã‚¢ã‚’åé›†
hand_scores = {
    seat.index: seat.hand_score 
    for seat in game.table.seats 
    if seat.in_hand and hasattr(seat, 'hand_score')
}

in_hand_seats = [seat.index for seat in game.table.seats if seat.in_hand]

# ãƒãƒƒãƒˆåˆ†é…ã‚’è¨ˆç®—
distributions = PotCalculator.calculate_distribution(
    pots=game.table.pots,
    hand_scores=hand_scores,
    in_hand_seats=in_hand_seats
)

# ã‚¹ã‚¿ãƒƒã‚¯ã«åæ˜ 
results = PotDistributor.apply_distribution(
    seats=game.table.seats,
    distributions=distributions
)
```

### 3. ãƒãƒƒãƒˆæ§‹é€ ã®æ¤œè¨¼ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰

```python
from ..domain.pot_calculator import PotCalculator

is_valid, error_message = PotCalculator.validate_pot_structure(game.table.pots)
if not is_valid:
    print(f"Invalid pot structure: {error_message}")
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®å˜ä½“ãƒ†ã‚¹ãƒˆ

`tests/test_pot_calculator.py` ã«ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…:

1. **ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãªã—ã®å ´åˆ**
   - ãƒ¡ã‚¤ãƒ³ãƒãƒƒãƒˆã«å…¨é¡è¿½åŠ 
   - è¤‡æ•°ãƒ©ã‚¦ãƒ³ãƒ‰ã®ç´¯ç©

2. **ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ã‚ã‚Šã®å ´åˆ**
   - 1äººã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ â†’ ã‚µã‚¤ãƒ‰ãƒãƒƒãƒˆ1ã¤
   - è¤‡æ•°äººã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ â†’ è¤‡æ•°ã‚µã‚¤ãƒ‰ãƒãƒƒãƒˆ

3. **ãƒãƒƒãƒˆåˆ†é…**
   - 1äººå‹ã¡
   - ãƒãƒ§ãƒƒãƒ—ï¼ˆå‰²ã‚Šåˆ‡ã‚Œã‚‹/å‰²ã‚Šåˆ‡ã‚Œãªã„ï¼‰
   - ã‚µã‚¤ãƒ‰ãƒãƒƒãƒˆåˆ†é…
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é™¤å¤–

4. **æ•´åˆæ€§æ¤œè¨¼**
   - æ­£å¸¸ãªãƒãƒƒãƒˆæ§‹é€ 
   - è² ã®é‡‘é¡ã‚¨ãƒ©ãƒ¼
   - å¯¾è±¡è€…ãªã—ã‚¨ãƒ©ãƒ¼

### çµ±åˆãƒ†ã‚¹ãƒˆ

æ—¢å­˜ã® `DealerService` ãƒ†ã‚¹ãƒˆã¯**ãã®ã¾ã¾å‹•ä½œ**ã—ã¾ã™ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰ã€‚

---

## ğŸ“ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å®Œäº†é …ç›®
- [x] `PotCalculator` ã‚¯ãƒ©ã‚¹ã®ä½œæˆ
- [x] `PotDistributor` ã‚¯ãƒ©ã‚¹ã®ä½œæˆ
- [x] `DealerService.collect_bets_to_pots()` ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- [x] `DealerService.distribute_pots()` ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- [x] å¾Œæ–¹äº’æ›æ€§ã®ç¶­æŒï¼ˆéæ¨å¥¨ãƒ¡ã‚½ãƒƒãƒ‰ã®æ®‹å­˜ï¼‰
- [x] å˜ä½“ãƒ†ã‚¹ãƒˆã®ä½œæˆ

### ä»Šå¾Œã®ä½œæ¥­
- [ ] `pytest` ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨å˜ä½“ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œã¨å‹•ä½œç¢ºèª
- [ ] éæ¨å¥¨ãƒ¡ã‚½ãƒƒãƒ‰ã®å‰Šé™¤ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³2.0ã§äºˆå®šï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

---

## âš ï¸ æ³¨æ„äº‹é …

### å¾Œæ–¹äº’æ›æ€§

ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯**éæ¨å¥¨**ã§ã™ãŒã€å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹ã•ã‚Œã¦ã„ã¾ã™:

```python
# âŒ éæ¨å¥¨ï¼ˆå†…éƒ¨ã§PotCalculatorã‚’å‘¼ã³å‡ºã—ï¼‰
dealer_service._create_side_pots(game, bet_contributions, all_in_seats)
dealer_service.calculate_pot_distribution(game)

# âœ… æ¨å¥¨ï¼ˆç›´æ¥ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨ï¼‰
PotCalculator.create_pots_from_bets(bet_contributions, all_in_seats, existing_pots)
PotCalculator.calculate_distribution(pots, hand_scores, in_hand_seats)
```

å°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§éæ¨å¥¨ãƒ¡ã‚½ãƒƒãƒ‰ã¯å‰Šé™¤ã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

### GameStateã¸ã®ä¾å­˜

`PotCalculator` ã¯ `GameState` ã«ä¾å­˜ã—ã¾ã›ã‚“ã€‚ã‚µãƒ¼ãƒ“ã‚¹å±¤ã§ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã«æ¸¡ã—ã¦ãã ã•ã„ã€‚

```python
# âœ… æ­£ã—ã„ä½¿ã„æ–¹
bet_contributions = {seat.index: seat.bet_in_round for seat in game.table.seats}
all_in_seats = [seat.index for seat in game.table.seats if seat.status == SeatStatus.ALL_IN]
pots = PotCalculator.create_pots_from_bets(bet_contributions, all_in_seats, existing_pots)

# âŒ é–“é•ã£ãŸä½¿ã„æ–¹
# PotCalculatorã«GameStateã‚’æ¸¡ã•ãªã„
```

---

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### 1. ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Š
- ãƒ¢ãƒƒã‚¯ãªã—ã§ç´”ç²‹ãªè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä½œæˆãŒå®¹æ˜“

### 2. ä¿å®ˆæ€§ã®å‘ä¸Š
- ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®å¤‰æ›´ãŒãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã«é›†ç´„
- ã‚µãƒ¼ãƒ“ã‚¹å±¤ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã€å¯èª­æ€§å‘ä¸Š

### 3. å†åˆ©ç”¨æ€§ã®å‘ä¸Š
- ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆAIã€ãƒªãƒ—ãƒ¬ã‚¤ãªã©ï¼‰ã‹ã‚‰ã‚‚ãƒãƒƒãƒˆè¨ˆç®—ã‚’åˆ©ç”¨å¯èƒ½
- ãƒãƒƒãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸€å…ƒç®¡ç†

### 4. ãƒ‡ãƒãƒƒã‚°ã®å®¹æ˜“åŒ–
- `validate_pot_structure()` ã§ãƒãƒƒãƒˆæ§‹é€ ã®æ•´åˆæ€§ã‚’æ¤œè¨¼
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ˜ç¢º

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [domain/README.md](../app/game/domain/README.md) - ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã®è¨­è¨ˆæ€æƒ³
- [services/README.md](../app/game/services/README.md) - ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®å½¹å‰²
- [STATE_MACHINE_DESIGN.md](../app/game/services/STATE_MACHINE_DESIGN.md) - ã‚²ãƒ¼ãƒ é€²è¡Œã®è¨­è¨ˆ

---

## ğŸ¤ è²¢çŒ®

ãƒãƒƒãƒˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã«æ”¹å–„ææ¡ˆãŒã‚ã‚‹å ´åˆ:

1. `tests/test_pot_calculator.py` ã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 
2. `domain/pot_calculator.py` ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…
3. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

**åŸå‰‡**: ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¯ `GameState` ã«ä¾å­˜ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚
